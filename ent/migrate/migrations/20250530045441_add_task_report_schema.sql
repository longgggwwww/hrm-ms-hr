-- Modify "employees" table
ALTER TABLE "public"."employees" ADD COLUMN "project_members" bigint NULL, ADD CONSTRAINT "employees_projects_members" FOREIGN KEY ("project_members") REFERENCES "public"."projects" ("id") ON UPDATE NO ACTION ON DELETE SET NULL;
-- Create "task_reports" table
CREATE TABLE "public"."task_reports" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "title" character varying NOT NULL, "content" character varying NULL, "status" character varying NOT NULL DEFAULT 'received', "progress_percentage" bigint NOT NULL DEFAULT 0, "reported_at" timestamptz NOT NULL, "issues_encountered" character varying NULL, "next_steps" character varying NULL, "estimated_completion" timestamptz NULL, "created_at" timestamptz NOT NULL, "updated_at" timestamptz NOT NULL, "reporter_id" bigint NOT NULL, "task_id" bigint NOT NULL, PRIMARY KEY ("id"), CONSTRAINT "task_reports_employees_task_reports" FOREIGN KEY ("reporter_id") REFERENCES "public"."employees" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, CONSTRAINT "task_reports_tasks_reports" FOREIGN KEY ("task_id") REFERENCES "public"."tasks" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION);
-- Drop "project_members" table
DROP TABLE "public"."project_members";
